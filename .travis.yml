sudo: required
services:
  - docker
language: node_js
node_js:
  - '6'
env:
  global:
  - REPO="wikiviews/wikiviews-elasticsearch"
  - secure: V+ULcMy/xfP75jWCT182pBTZhxseQt9rT7brEoEnM/g59xqD0tb5vluwgFMfqwK6HjLU5bmcLsHKP70TuBG94wLrwfpd094Hs0cyDVWnwX6Szmk63fq+zvr9J9M9rqsFeNGbnaLTY8Sxr1Zh/WwFkjYDsP4Qu3JZyNaBJNuc+6pvb/ImaAKpvjGVTsGQpH/ooZJSHBJGLhzBs0+c9nAnl6BoF6zhx9m2H946QZ0V478X2smN6JNTSQI7nuAlejtUBFuyHcZfsM2hqHecC9qmOyC81GVpBBHVRqkk+hSlMkaT1IMDTqRwq1jqi21iQ0YQRqFFPOHwQiZ8sY9HYVqvEGiQ/t3oxiHkz2d82iPBralskUH53tEK+mXaaGGUmBKrCki19DU+8I9OImhV1rAgXuNKN168Wf4EHPv4cTNN4AGM6v5HQ3J7G0G1e5iHsAKLJt+rIKG0f5Kvfo35LtjXqohk4x4F0t+etUlc7Wyp7Y3oyxHrp95wwFKiBuHUZ2Vi/ccUGZmfOO1Mn9DafraU2hltepFr5e/As0zFhMSbM6hL8tVzVJ3y3D4IFs9Le5kPkyZmlC06C7gBXIi6H5Cshak97SSeq0zRb8H+zIiz2Vm+D/Y0Hhca4QZmwHYX8FGwnhAlo1zLyEXcxqg0TIb+dVJdCeDb7rKfLf/qdmzRnKw=
  - secure: YSDIs544QiU/QPiY/LtHz9NEohcMKHL80dWkrWZ9TLUB6uA9b6T2rjsYTrQTI1xxPIwZYIAa0dyjkYhrjg+mkHil6zBSoxxNr9kW90cA2yUgNmY/dr/zIbVRiRwTYIssSjCsfhT3HGzZ+CdlfeGv/g3PkfT16ddeaE5l6qBXR2KJAzh0wMObAqZje5pTzFGuHEoYhnYe0N5LlUIn4pyXt7dJvJQZy2Y/X7eG7aUObc/UuKKCkH1E1O0BYLBt9QdtYt61msf+F+APBM0pYDPVyDLNzwSZhG0jTZymk8gDAxsqsbziWvayq/ybMNsPkIsIBnVj4rt3t++K3WVvzXLTnMag4U+gI4GgAbN4waZdt7wDibJSO9dWW5TvFdp/CQ79eFlCsNdRhJUfhV7GcoWfASbRKRF/UIacHkL1fWMiUZ6zXQNofWjvpQVoeSJEaE27/BZlXknqB0vm9bD4QR0l8ojIFXa+h5S2Brut/lPdzm9NoX3sYHcnA5m8u4eXuCjvPUmaDqg0BoqtoDm7tH8kXsn08V/h015E9J767iCJxKIQ6JHEd+QEmUljFvkQsJ83jb4uGhVy7jGb7H8lGiMsWdRn2lv44LEWwrZiYZU0COmLAXKudtndrvZ9G6KjBnI5+v60UOu3iX24OGFS78rVAC+jIsgrotbQHGnzdB42yys=
  - secure: OLdTAlmIIsx0XizCCGu2HuDdiKNOxuu4Zqb/s/wfjnAjBlPzj7Ucke8f92Q4zrdMiGlWKbDRhKYQcQuM8ZP9J6MfF8nS7iioi1KHmlnYcsmZ5Rv8E520mMdPyta2r5WQRY2jB7Z/dweysxOjDkKyup1NyGFsxQ6I4+/6L9Q68optcvDZN8BZ5AziaXEXTMFEUpZKS+lOXMi0Fk2NNAk+NOVcIkT1QBPxPJuEY3QlhU2dLVyB14KhnQxFuyxAzf0FKJJ6Qd9mkGqdDU5LDADWRY3vHjfRTk/14+TZGyXUGQT72O6CvmzqbbFq7C5WLCIEe4FdeP3WFhmZEjKDIGAy+Lf2C0lD++toWH33jSiHrZ2+Tnoyzzh6/f6DSNL2G0GoVH+QVlrgk7/nOsvHSmOdkhW3bVdsGk2gWtsnL8IrASBAKTAO0MAu4KLTSgIyJNCyF7o9feJItawMDKgIhEXhgnR2N9ejRh3dbXYkPl6tUeYQaqJrFgxtwRlG1WG0yQKWfPwYhfidztJ60RnU2ALaB6qqhcWhfPKdyPlJNdmEqGHqFqZf2oU2xDtSE7ezkVE6FcaZy3855uBouC8EUOALb2Jf+gADYDoRFq+5+wYlIVYnZ907+6V7/wZtxTItOEW0KnK84AelnhRs71eIc9rAnZXoMumPoLZ4beXmxQzXTBc=
before_script: npm run build
after_success:
  - "./build/travis-ci.build.sh"
  - "./build/travis-ci.deploy.sh"
deploy:
  provider: npm
  email: wikiviews@devwurm.net
  api_key:
    secure: hmdEGv6dYEVyjYouM7yiN3xd3/ZKMC5k7wX59X4kde1+HM0E9lgJBZiWuLVGSnMEzNEcY8GpWdow9YfmAOgMvERQaVKD2KcZy9WSrkvHkV3STgAnIN4o2If0tCccXIDZ7NXaEAtjjSLmmN6lMdVyng6YafQgkcy71p/TAK7e3KaMPbIa/xCgoByz5qe+BUt5WMIOx4B8h8LDMtkDARXRrlztVq50yf5DpQISHj7+ZTPFJKQP75fBtYsRg6R8NWerF9gdl9MYVQ7tJ70CbjK3JsXfelu3nXbXbo4lYG0bNyTGfgRm78q7VPf+HT+XxX6m1s9FqVcUy75DtsQVWcxBaTagYLa2BEYsj0dn8J8DC6VHp3b1iIrMnw5/mFil7goLbVpztt8KynD6v9u0NaXs7lON8ypq54AGsVNC6WrodI4m2FRyaTs6RDdu9SIvsV/g1J6hR23pCseG41Fm7r3rwLTIXLAkWxRkLEdiEHqItlbo3qzDxtdX24IH5+jTmYUy+kjmyXV/+dadXtiHkQFMQMIYupLzZw+nOK/F7Ixa4RLdAoxe3Lrqo67xwspw4BxSem7loQTUWw/C/L6uVwgBJJfQMA6xp0gyVYsf5samWpUbHdEFGIqmEvim3B8ASio+Avpr5GNDZ+PAlljMw/rPBhJkzd4tk7+AiZMb8O7vSKQ=
  on:
    tags: true
  skip_cleanup: true
